<!DOCTYPE html>
<div class="container">
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Wikidata Dashboard</h3>
        </div>
        <div class="panel-body">

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <tabset>
                    <!-- plain qid -->
                    <tab>
                        <tab-heading>
                            <i class="fa fa-search"></i> Send QID
                        </tab-heading>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <p>Type a Wikidata Q code subject in this text box and click Send.</p>

                                <div class="input-group" style="margin-top: 1em;">
                                    <span class="input-group-addon">Q</span>
                                    <input type="text" class="form-control" ng-model="vm.qQuery" placeholder="Type Q values">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" ng-click="vm.sendQIDRequest(vm.qQuery)"
                                                ng-disabled="vm.qQuery.length===0">Send
                                        </button>

                                        <button class="btn btn-warning" ng-click="vm.qQuery = ''">
                                            <span class="fa fa-trash"></span>
                                        </button>
                                    </span>
                                </div>
                                <a ng-click="vm.qidQueryCollapse=!vm.qidQueryCollapse" style="cursor: pointer;">More info...</a>

                                <div collapse="vm.qidQueryCollapse">
                                    <div class="well well-sm">
                                        <p><strong>Example:</strong> Q42, should bring an article about: <em>Douglas Adams</em></p>

                                        <p>More examples and info: <a ng-href="https://wdq.wmflabs.org/api_documentation.html">https://wdq.wmflabs.org/api_documentation.html</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tab>

                    <!-- wikidata query -->
                    <tab>
                        <tab-heading>
                            <i class="fa fa-search"></i> Send Raw Query
                        </tab-heading>
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <p>Type a Wikidata API query in this text box and click Send.</p>

                                <div class="input-group" style="margin-top: 1em;">
                                    <div class="input-group-btn" dropdown dropdown-append-to-body>
                                        <button id="btn-append-to-body" type="button" class="btn btn-info dropdown-toggle" dropdown-toggle>
                                            {{vm.selectedType ? vm.selectedType.name : "Select Query Type"}} <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="btn-append-to-body">
                                            <li role="menuitem" ng-repeat="item in vm.queryTypes" ng-click="vm.selectedType = item"><a ng-href="#">{{item.name}}</a></li>
                                        </ul>
                                    </div>
                                    <input type="text" class="form-control" ng-model="vm.wikidataQuery" placeholder="Type query here..">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" ng-click="vm.sendWikidataRequest(vm.selectedType.name, vm.wikidataQuery)"
                                                ng-disabled="vm.wikidataQuery.length===0">Send
                                        </button>
                                        <button class="btn btn-warning" ng-click="vm.wikidataQuery = ''">
                                            <span class="fa fa-trash"></span>
                                        </button>
                                    </span>
                                </div>
                                <a ng-click="vm.wikidataQueryCollapse=!vm.wikidataQueryCollapse" style="cursor: pointer;">More info...</a>

                                <div collapse="vm.wikidataQueryCollapse">
                                    <div class="well well-sm">
                                        <p><strong>Example:</strong> tree[4504][171,273,75,76,77,70,71,74,89]</p>

                                        <p>More examples and info: <a ng-href="https://wdq.wmflabs.org/api_documentation.html">https://wdq.wmflabs.org/api_documentation.html</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tab>
                    <!-- save -->
                    <tab>
                        <tab-heading>
                            <i class="fa fa-save"></i> Save
                        </tab-heading>

                        <p>save on db</p>
                    </tab>
                </tabset>
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <tabset>
                    <tab>
                        <tab-heading>
                            <i class=""></i> Raw Response
                        </tab-heading>

                        <div class="center-block">
                            <form class="form-inline">
                                <div class="form-group">
                                    <button class="btn btn-default" ng-click="vm.queryResult=''">Clean</button>
                                </div>
                            </form>
                        </div>

                        <div class="center-block" ng-show="vm.sendingQuery">
                            <span class="fa fa-spin fa-refresh fa-2x"></span>
                        </div>
                        <div ng-hide="vm.sendingQuery">
                            <pre>{{vm.queryResult | json}}</pre>
                        </div>

                    </tab>
                    <tab>
                        <tab-heading>
                            <i class=""></i> Pretty JSON
                        </tab-heading>

                        <div class="center-block" ng-show="vm.sendingQuery">
                            <span class="fa fa-spin fa-refresh fa-2x"></span>
                        </div>
                        <div ng-hide="vm.sendingQuery">
                            <div ng-if="vm.queryResult">
                                <json-tree object="vm.queryResult"></json-tree>
                            </div>
                            <div ng-if="!vm.queryResult">
                                <h4>Nothing to show</h4>
                            </div>
                        </div>
                    </tab>
                    <tab>
                        <tab-heading>
                            <i class="fa fa-camera"></i> Preview
                        </tab-heading>
                        <div class="center-block" ng-show="vm.sendingQuery">
                            <span class="fa fa-spin fa-refresh fa-2x"></span>
                        </div>
                        <div ng-hide="vm.sendingQuery">
                            <div ng-include="'dashboard/templates/item-details.html'"></div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
</div>